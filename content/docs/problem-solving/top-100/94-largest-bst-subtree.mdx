---
title: 94. Largest BST Subtree
description: Find the largest BST subtree in a binary tree
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { LanguageSwitcher, TranslatedText } from '@/components/LanguageSwitcher';

<LanguageSwitcher />

# <TranslatedText en="Largest BST Subtree" bn="সবচেয়ে বড় BST সাবট্রি" />

<TranslatedText en="Find the largest subtree in a binary tree that is also a BST." bn="একটি বাইনারি ট্রিতে সবচেয়ে বড় সাবট্রি খুঁজুন যা একটি BST ও।" />

## <TranslatedText en="Solution" bn="সমাধান" />

<Tabs items={['C++', 'Python', 'JavaScript']} groupId="language">
  <Tab value="C++">
```cpp
#include <iostream>
#include <climits>
using namespace std;

struct TreeNode {
    int val;
    TreeNode* left;
    TreeNode* right;
    TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
};

struct Info {
    bool isBST;
    int size;
    int minVal;
    int maxVal;
};

Info largestBSTHelper(TreeNode* root, int& maxSize) {
    if (!root) {
        return {true, 0, INT_MAX, INT_MIN};
    }

    Info left = largestBSTHelper(root->left, maxSize);
    Info right = largestBSTHelper(root->right, maxSize);

    Info current;
    current.size = left.size + right.size + 1;

    if (left.isBST && right.isBST && root->val > left.maxVal && root->val < right.minVal) {
        current.isBST = true;
        current.minVal = min(root->val, left.minVal);
        current.maxVal = max(root->val, right.maxVal);
        maxSize = max(maxSize, current.size);
    } else {
        current.isBST = false;
    }

    return current;
}

int largestBSTSubtree(TreeNode* root) {
    int maxSize = 0;
    largestBSTHelper(root, maxSize);
    return maxSize;
}

int main() {
    TreeNode* root = new TreeNode(10);
    root->left = new TreeNode(5);
    root->right = new TreeNode(15);
    root->left->left = new TreeNode(1);
    root->left->right = new TreeNode(8);
    root->right->right = new TreeNode(7);

    cout << "Largest BST size: " << largestBSTSubtree(root) << endl;

    return 0;
}
```

**Output:**
```
Largest BST size: 3
```
  </Tab>
  <Tab value="Python">
```python
class TreeNode:
    def __init__(self, val=0, left=None, right=None):
        self.val = val
        self.left = left
        self.right = right

class Info:
    def __init__(self, is_bst, size, min_val, max_val):
        self.is_bst = is_bst
        self.size = size
        self.min_val = min_val
        self.max_val = max_val

def largest_bst_helper(root, max_size):
    if not root:
        return Info(True, 0, float('inf'), float('-inf'))

    left = largest_bst_helper(root.left, max_size)
    right = largest_bst_helper(root.right, max_size)

    current = Info(False, left.size + right.size + 1, 0, 0)

    if left.is_bst and right.is_bst and root.val > left.max_val and root.val < right.min_val:
        current.is_bst = True
        current.min_val = min(root.val, left.min_val)
        current.max_val = max(root.val, right.max_val)
        max_size[0] = max(max_size[0], current.size)

    return current

def largest_bst_subtree(root):
    max_size = [0]
    largest_bst_helper(root, max_size)
    return max_size[0]

root = TreeNode(10)
root.left = TreeNode(5)
root.right = TreeNode(15)
root.left.left = TreeNode(1)
root.left.right = TreeNode(8)
root.right.right = TreeNode(7)

print("Largest BST size:", largest_bst_subtree(root))
```

**Output:**
```
Largest BST size: 3
```
  </Tab>
  <Tab value="JavaScript">
```javascript
class TreeNode {
    constructor(val, left = null, right = null) {
        this.val = val;
        this.left = left;
        this.right = right;
    }
}

class Info {
    constructor(isBST, size, minVal, maxVal) {
        this.isBST = isBST;
        this.size = size;
        this.minVal = minVal;
        this.maxVal = maxVal;
    }
}

function largestBSTHelper(root, maxSize) {
    if (!root) {
        return new Info(true, 0, Infinity, -Infinity);
    }

    const left = largestBSTHelper(root.left, maxSize);
    const right = largestBSTHelper(root.right, maxSize);

    const current = new Info(false, left.size + right.size + 1, 0, 0);

    if (left.isBST && right.isBST && root.val > left.maxVal && root.val < right.minVal) {
        current.isBST = true;
        current.minVal = Math.min(root.val, left.minVal);
        current.maxVal = Math.max(root.val, right.maxVal);
        maxSize.value = Math.max(maxSize.value, current.size);
    }

    return current;
}

function largestBSTSubtree(root) {
    const maxSize = { value: 0 };
    largestBSTHelper(root, maxSize);
    return maxSize.value;
}

const root = new TreeNode(10);
root.left = new TreeNode(5);
root.right = new TreeNode(15);
root.left.left = new TreeNode(1);
root.left.right = new TreeNode(8);
root.right.right = new TreeNode(7);

console.log("Largest BST size:", largestBSTSubtree(root));
```

**Output:**
```
Largest BST size: 3
```
  </Tab>
</Tabs>

<TranslatedText en={<><p><strong>Time Complexity:</strong> O(n)</p><p><strong>Space Complexity:</strong> O(h)</p></>} bn={<><p><strong>সময় জটিলতা:</strong> O(n)</p><p><strong>স্থান জটিলতা:</strong> O(h)</p></>} />
