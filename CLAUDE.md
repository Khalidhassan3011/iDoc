# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Interview Doc is a Next.js documentation site built with Fumadocs that provides Flutter interview questions and problem-solving resources. The site uses a **multi-doc architecture** with separate documentation sections accessible via sidebar tabs.

## Tech Stack

- **Framework**: Next.js 15.5.0 with Turbopack
- **Documentation**: Fumadocs UI 15.7.1 + Fumadocs MDX 11.8.0
- **Content**: MDX files with YAML frontmatter
- **Styling**: Tailwind CSS 4.1.12

## Development Commands

```bash
# Install dependencies and rebuild MDX
npm install

# Start development server (with Turbopack)
npm run dev

# Clean rebuild (when MDX files have issues)
rm -rf .next && npm run dev

# Build for production
npm run build

# Start production server
npm start

# Rebuild MDX source (runs automatically on install)
npm run postinstall
```

## Multi-Doc Architecture

This project uses Fumadocs **root folders** approach for multi-doc setup:

### Content Structure
```
content/docs/
├── flutter/            # Root folder 1
│   ├── meta.json      # Contains "root": true
│   ├── index.mdx
│   ├── basics/
│   ├── intermediate/
│   ├── advanced/
│   └── [other subdirs]
└── problem-solving/    # Root folder 2
    ├── meta.json      # Contains "root": true
    └── index.mdx
```

### Root Folder Configuration

Each root folder **must** have a `meta.json` with:
- `"root": true` - Marks it as a separate documentation section
- `"title"` - Display name in sidebar tabs
- `"description"` - Section description
- `"pages"` - Array defining navigation order

Example:
```json
{
  "title": "Flutter",
  "description": "Flutter interview questions",
  "root": true,
  "pages": ["index", "basics", "intermediate", "advanced"]
}
```

### Key Architecture Files

- **`lib/source.ts`**: Content source adapter using `loader()` from fumadocs-core. Single loader handles all root folders.
- **`source.config.ts`**: MDX configuration with single `defineDocs()` for all collections.
- **`app/docs/[[...slug]]/page.tsx`**: Dynamic route handler with redirect logic - redirects `/docs` to `/docs/flutter` (first root folder).
- **`lib/layout.shared.tsx`**: Shared layout config including site name "Interview Doc".

## MDX Content Guidelines

### Required Frontmatter
Every MDX file needs YAML frontmatter:
```yaml
---
title: Page Title
description: Page description
---
```

### MDX Syntax Rules

**Critical**: MDX parses `<` as JSX tag start. Always avoid patterns like:

❌ **Wrong**: `Frame times should be <16ms`
✅ **Correct**: `Frame times should be less than 16ms`

### Converting Nextra to Fumadocs

When migrating content from Nextra:
1. Add YAML frontmatter (title, description)
2. Remove Nextra imports: `import { Callout } from 'nextra/components'`
3. Replace `<Callout>` with markdown blockquotes: `> **Note:**`
4. Remove JSX style objects from `<span>` tags
5. Convert to plain markdown bold text

Use the provided `convert-mdx.js` or `fix-mdx.js` scripts for batch processing.

## Generated Files

**`.source/index.ts`**: Auto-generated by `fumadocs-mdx` during postinstall. Contains imports for all MDX files and meta.json files. Regenerates when:
- MDX files are added/modified
- meta.json files change
- `npm run postinstall` is executed

## Routing

- `/` - Landing page
- `/docs` - Redirects to `/docs/flutter`
- `/docs/flutter/*` - Flutter documentation
- `/docs/problem-solving/*` - Problem solving documentation
- `/api/search` - Search API endpoint

## Adding New Documentation Sections

1. Create new folder in `content/docs/`
2. Add `meta.json` with `"root": true`
3. Create MDX files with proper frontmatter
4. Run `npm run postinstall` to rebuild
5. Section appears as new sidebar tab automatically

## Common Issues

### Build Errors with MDX
- **Symptom**: `Unexpected character` errors
- **Cause**: MDX interpreting `<` as JSX
- **Fix**: Replace `<number` patterns with "less than number"

### 404 on Documentation Pages
- **Cause**: Missing or invalid `meta.json` configuration
- **Fix**: Ensure root folders have proper `meta.json` with `"root": true` and `pages` array

### Changes Not Appearing
- **Fix**: Run `rm -rf .next && npm run postinstall && npm run dev`

## Project History

This project was migrated from a Nextra-based setup to Fumadocs. All MDX files have been converted from Nextra format to Fumadocs-compatible format with proper frontmatter.